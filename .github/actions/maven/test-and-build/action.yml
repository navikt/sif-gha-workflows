name: 'Maven install'
description: 'Maven install'
inputs:
  t-2c:
    description: 'Thread config to use'
    required: false
    default: ''
  skip-tests:
    description: 'Skip tests'
    required: false
    default: 'false'
  quiet:
    description: 'Maven quiet mode'
    required: false
    default: 'true'
outputs:
  build-version:
    description: "Build version"
    value: ${{ steps.generate-build-version.outputs.build-version }}
runs:
  using: "composite"
  steps:
    - name: Generate build version
      id: generate-build-version
      uses: ./.github/actions/build-version
    - name: Build artifacts
      shell: bash
      run: |
        echo "Building artifacts ${{ steps.generate-build-version.outputs.build-version }}"
        mvn versions:set -DnewVersion="${{ steps.generate-build-version.outputs.build-version }}" -s settings.xml -q -e -B
        mvn install -s settings.xml ${{ inputs.t-2c }} ${{ (inputs.quiet == 'true' && '-q') || '' }} -e -B ${{ (inputs.skip-tests == 'true' && '-DskipTests') || '' }}
